<!DOCTYPE html>
<html>
<head>
  <title>Hospital Queue | Staff Dashboard</title>
  <link rel="stylesheet" href="/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
</head>
<body class="bg-light">

<div class="container">

  <header class="header">
    <h2>Welcome, <%= name %>!</h2>
    <a href="/logout" class="logout-btn"><i class="fas fa-sign-out-alt"></i> Logout</a>
  </header>

  <!-- Add Visitor Form -->
  <div class="card">
    <h3><i class="fas fa-user-plus"></i> Add Patient</h3>
    <form method="POST" action="/queue/staff/add" class="form-inline">
      <input type="text" name="visitorName" placeholder="Patient Name" required>
      <input type="text" name="purpose" placeholder="Purpose" required>
      <button type="submit"><i class="fas fa-plus"></i> Add</button>
    </form>
  </div>

  <!-- Current Queue -->
  <div class="card">
    <h3><i class="fas fa-list"></i> Current Queue</h3>
    <% if(!queue || queue.length===0){ %>
      <p class="text-muted">No patients waiting</p>
    <% } else { %>
      <ul class="queue-list">
        <% queue.forEach(v => { %>
          <li>
            <span><strong><%= v.visitorName %></strong> - <%= v.purpose %></span>
            <span class="time-badge"><%= new Date(v.time).toLocaleTimeString() %></span>
            <form method="POST" action="/queue/serve/<%= v.id %>">
              <button type="submit"><i class="fas fa-check"></i> Served</button>
            </form>
          </li>
        <% }) %>
      </ul>
    <% } %>
  </div>

</div>
</body>
</html>
